<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .accordion {
        transition: all 0.3s ease-in-out;
      }

      .accordion-item {
        padding: 20px 0;
      }

      .accordion-content {
        height: 0;
        overflow: hidden;
        transition: height 0.3s ease-in-out;
      }

      .accordion-item.active {
        padding: 20px 0;
      }

      .accordion-item.active .accordion-content {
        height: auto;
        transition: height 0.3s ease-in-out;
      }

      .active_line {
        position: relative;
        width: 100%;
        /* height: 100%; */
      }

      .active_line::after {
        position: absolute;
        content: "";
        left: 0;
        top: 0;
        width: 0;
        background-color: black;
        height: 10px;
        animation: line_fill 5s ease-in-out infinite;
      }

      @keyframes line_fill {
        0% {
          width: 0;
        }

        100% {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="accordion">
      <div class="accordion-item">
        <div class="accordion-header">Accordion 1</div>
        <div class="accordion-content" style="height: 0px">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
          elementum velit elit, a porttitor elit faucibus id. Nullam congue
          libero quam, et dapibus est sodales sit amet. In scelerisque, eros in
          suscipit malesuada, nisi neque posuere velit, non ullamcorper turpis
          est a nunc. Proin euismod viverra aliquam. Sed molestie, nulla et
          malesuada commodo, sapien tellus blandit est, id interdum felis augue
          vel ante.
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">Accordion 2</div>
        <div class="accordion-content" style="height: 0px">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
          elementum velit elit, a porttitor elit faucibus id. Nullam congue
          libero quam, et dapibus est sodales sit amet. In scelerisque, eros in
          suscipit malesuada, nisi neque posuere velit, non ullamcorper turpis
          est a nunc. Proin euismod viverra aliquam. Sed molestie, nulla et
          malesuada commodo, sapien tellus blandit est, id interdum felis augue
          vel ante.
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">Accordion 3</div>
        <div class="accordion-content" style="height: 58px">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
          elementum velit elit, a porttitor elit faucibus id. Nullam congue
          libero quam, et dapibus est sodales sit amet. In scelerisque, eros in
          suscipit malesuada, nisi neque posuere velit, non ullamcorper turpis
          est a nunc. Proin euismod viverra aliquam. Sed molestie, nulla et
          malesuada commodo, sapien tellus blandit est, id interdum felis augue
          vel ante.
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">Accordion 3</div>
        <div class="accordion-content" style="height: 58px">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
          elementum velit elit, a porttitor elit faucibus id. Nullam congue
          libero quam, et dapibus est sodales sit amet. In scelerisque, eros in
          suscipit malesuada, nisi neque posuere velit, non ullamcorper turpis
          est a nunc. Proin euismod viverra aliquam. Sed molestie, nulla et
          malesuada commodo, sapien tellus blandit est, id interdum felis augue
          vel ante.
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header">Accordion 3</div>
        <div class="accordion-content" style="height: 58px">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
          elementum velit elit, a porttitor elit faucibus id. Nullam congue
          libero quam, et dapibus est sodales sit amet. In scelerisque, eros in
          suscipit malesuada, nisi neque posuere velit, non ullamcorper turpis
          est a nunc. Proin euismod viverra aliquam. Sed molestie, nulla et
          malesuada commodo, sapien tellus blandit est, id interdum felis augue
          vel ante.
        </div>
      </div>
    </div>
    <script>
      const accordionHeaders = document.querySelectorAll(".accordion-header");
      const intervalDuration = 5000; // change this to set the duration of each interval in milliseconds
      let activeIndex = 0;
      let timerId;

      function cycleAccordions() {
        const prevIndex = activeIndex;
        activeIndex = (activeIndex + 1) % accordionHeaders.length;
        const nextIndex = activeIndex;

        const prevAccordionItem = accordionHeaders[prevIndex].parentElement;
        const nextAccordionItem = accordionHeaders[nextIndex].parentElement;

        prevAccordionItem.classList.remove("active");
        prevAccordionItem.classList.remove("active_line");
        prevAccordionItem.querySelector(".accordion-content").style.height =
          "0";
        nextAccordionItem.classList.add("active");
        nextAccordionItem.classList.add("active_line");
        nextAccordionItem.querySelector(".accordion-content").style.height =
          nextAccordionItem.querySelector(".accordion-content").scrollHeight +
          "px";
      }

      function startCycle() {
        cycleAccordions();
        timerId = setInterval(cycleAccordions, intervalDuration);
      }

      function stopCycle() {
        clearInterval(timerId);
      }

      // Start the cycle after a delay of 2 seconds
      setTimeout(startCycle, 2000);

      accordionHeaders.forEach((header, index) => {
        header.addEventListener("click", () => {
          const accordionItem = header.parentElement;
          const accordionContent =
            accordionItem.querySelector(".accordion-content");

          // Close all other accordions
          const activeAccordionItems = document.querySelectorAll(
            ".accordion-item.active"
          );
          activeAccordionItems.forEach((item) => {
            if (item !== accordionItem) {
              item.classList.remove("active");
              item.classList.remove("active_line");
              item.querySelector(".accordion-content").style.height = "0";
            }
          });

          // Toggle the clicked accordion
          accordionItem.classList.toggle("active");
          accordionItem.classList.toggle("active_line");
          if (accordionItem.classList.contains("active")) {
            accordionContent.style.height =
              accordionContent.scrollHeight + "px";
            stopCycle();
          } else {
            accordionContent.style.height = "0";
            startCycle();
          }
        });
      });
    </script>
  </body>
</html>
